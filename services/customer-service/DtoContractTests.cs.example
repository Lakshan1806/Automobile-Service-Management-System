using System.Text.Json;
using PaymentApi.Dtos;
using Xunit;

namespace PaymentApi.Tests;

public class DtoContractTests
{
    [Fact]
    public void CreatePaymentDto_Uses_Request_Casing()
    {
        var dto = new CreatePaymentDto
        {
            ItemName = "Premium Wash",
            Amount = 1999.95m,
            FirstName = "Maya",
            LastName = "Silva",
            Email = "maya@example.com",
            Phone = "0771234567",
            Address = "42 Flower Rd",
            City = "Colombo",
            Country = "Sri Lanka"
        };

        var json = JsonSerializer.Serialize(dto, new JsonSerializerOptions
        {
            PropertyNamingPolicy = JsonNamingPolicy.CamelCase
        });

        Assert.Contains("\"itemName\":\"Premium Wash\"", json);
        Assert.Contains("\"amount\":1999.95", json);
        Assert.Contains("\"firstName\":\"Maya\"", json);
        Assert.Contains("\"country\":\"Sri Lanka\"", json);
    }
}
